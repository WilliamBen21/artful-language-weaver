<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VisualStory - Where Stories Come Alive</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --dark-bg: #0A0B0E;  /* Deeper, richer black */
            --card-bg: rgba(16, 17, 22, 0.85);  /* Slightly blue-tinted dark */
            --glass-bg: rgba(255, 255, 255, 0.08);  /* More subtle glass effect */
            
            /* Modern gradients */
            --primary-gradient: linear-gradient(135deg, #6366F1 0%, #4F46E5 100%);  /* Electric indigo */
            --secondary-gradient: linear-gradient(135deg, #EC4899 0%, #F43F5E 100%);  /* Modern pink to red */
            --accent-gradient: linear-gradient(135deg, #10B981 0%, #059669 100%);  /* Fresh mint */
            
            /* Text colors */
            --text-primary: #F9FAFB;  /* Crisp white */
            --text-secondary: #9CA3AF;  /* Subtle gray */
            --border-color: rgba(255, 255, 255, 0.08);  /* More subtle borders */

            /* Additional modern accents */
            --success-color: #10B981;  /* Mint green */
            --error-color: #EF4444;    /* Bright red */
            --warning-color: #F59E0B;  /* Warm amber */
            --info-color: #3B82F6;     /* Electric blue */
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--dark-bg);
            color: var(--text-primary);
            overflow-x: hidden;
            background-image: 
                radial-gradient(circle at 0% 0%, rgba(99, 102, 241, 0.03) 0%, transparent 50%),
                radial-gradient(circle at 100% 0%, rgba(236, 72, 153, 0.03) 0%, transparent 50%),
                radial-gradient(circle at 50% 100%, rgba(16, 185, 129, 0.03) 0%, transparent 50%);
        }

        /* DYNAMIC HEADER */
        .dynamic-header {
            position: fixed;
            top: 0;
            left: 320px;
            right: 0;
            height: 80px;
            background: rgba(10, 10, 10, 0.95);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid var(--border-color);
            z-index: 200;
            display: flex;
            align-items: center;
            padding: 0 32px;
            transform: translateY(-100%);
            transition: transform 0.3s ease;
        }

        .dynamic-header.visible {
            transform: translateY(0);
        }

        .header-avatar {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            background: var(--secondary-gradient);
            margin-right: 16px;
            border: 2px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.3);
            flex-shrink: 0;
        }

        .header-info {
            flex: 1;
        }

        .header-username {
            color: var(--text-primary);
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 4px;
        }

        .header-story-title {
            color: var(--text-secondary);
            font-size: 14px;
            opacity: 0.8;
        }

        .header-actions {
            display: flex;
            gap: 16px;
            align-items: center;
        }

        .header-action-btn {
            background: rgba(255, 255, 255, 0.1);
            border: none;
            color: var(--text-primary);
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            border: 1px solid var(--border-color);
        }

        .header-action-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-1px);
        }

        .app-container {
            display: flex;
            min-height: 100vh;
            position: relative;
        }

        .sidebar {
            width: 320px;
            background: rgba(10, 10, 10, 0.95);
            backdrop-filter: blur(20px);
            border-right: 1px solid var(--border-color);
            padding: 24px;
            position: fixed;
            height: 100vh;
            z-index: 100;
            transition: transform 0.3s ease;
        }

        .logo-section {
            display: flex;
            align-items: center;
            margin-bottom: 40px;
            padding: 12px;
        }

        .logo {
            width: 48px;
            height: 48px;
            background: var(--primary-gradient);
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            font-weight: 700;
            margin-right: 16px;
            box-shadow: 0 8px 32px rgba(102, 126, 234, 0.3);
        }

        .logo-text {
            font-size: 20px;
            font-weight: 700;
            background: var(--primary-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .nav-section {
            margin-bottom: 32px;
        }

        .nav-item {
            display: flex;
            align-items: center;
            padding: 16px 20px;
            border-radius: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-bottom: 8px;
            position: relative;
            overflow: hidden;
        }

        .nav-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: var(--glass-bg);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .nav-item:hover::before {
            opacity: 1;
        }

        .nav-item.active {
            background: var(--primary-gradient);
            transform: translateX(4px);
            box-shadow: 0 8px 32px rgba(102, 126, 234, 0.3);
        }

        .nav-icon {
            font-size: 20px;
            margin-right: 16px;
            width: 24px;
            text-align: center;
            position: relative;
            z-index: 1;
        }

        .nav-text {
            font-weight: 500;
            font-size: 15px;
            position: relative;
            z-index: 1;
        }

        .trending-section {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 20px;
            backdrop-filter: blur(20px);
            border: 1px solid var(--border-color);
        }

        .trending-title {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 16px;
            color: var(--text-primary);
        }

        .trending-item {
            display: flex;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid var(--border-color);
        }

        .trending-item:last-child {
            border-bottom: none;
        }

        .trending-number {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: var(--accent-gradient);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: 600;
            margin-right: 12px;
        }

        .trending-text {
            font-size: 13px;
            color: var(--text-secondary);
        }

        .main-content {
            margin-left: 320px;
            flex: 1;
            min-height: 100vh;
            transition: margin-top 0.3s ease;
        }

        .main-content.header-visible {
            margin-top: 80px;
        }

        .main-feed {
            height: 100vh;
            overflow-y: scroll;
            scroll-snap-type: none; /* Removed snap scrolling */
            scrollbar-width: none;
            scroll-behavior: smooth;
        }

        .main-feed::-webkit-scrollbar {
            display: none;
        }

        .story-card {
            min-height: 100vh;
            display: flex;
            scroll-snap-align: start;
            position: relative;
            background: var(--card-bg);
            backdrop-filter: blur(20px);
            border: 1px solid var(--border-color);
            transition: all 0.6s cubic-bezier(0.16, 1, 0.3, 1); /* Smoother easing */
        }

        .video-section {
            width: 60%;
            position: relative;
            background: #111;
            transition: all 0.8s cubic-bezier(0.16, 1, 0.3, 1);
            transform-origin: center center;
            will-change: transform;
            opacity: 0.95;
        }

        .video-section.shrunk {
            transform: scale(0.98) translateX(-2%); /* Even gentler transform */
            border-radius: 16px;
            opacity: 0.85;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        .video-container {
            width: 100%;
            height: 100vh;
            position: relative;
            overflow: hidden;
            border-radius: 0 24px 24px 0;
            transition: all 0.6s cubic-bezier(0.16, 1, 0.3, 1);
            will-change: transform;
            backface-visibility: hidden;
            transform: translateZ(0);
        }

        .video-section.shrunk .video-container {
            border-radius: 24px;
        }

        .ai-video {
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, var(--dark-bg) 0%, rgba(16, 17, 22, 0.95) 100%);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            position: relative;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .ai-video:hover {
            background: linear-gradient(135deg, rgba(16, 17, 22, 0.95) 0%, var(--dark-bg) 100%);
        }

        .ai-video::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(circle at 30% 40%, rgba(99, 102, 241, 0.05) 0%, transparent 50%),
                radial-gradient(circle at 70% 60%, rgba(236, 72, 153, 0.05) 0%, transparent 50%);
            pointer-events: none;
        }

        .video-overlay {
            position: absolute;
            top: 24px;
            right: 24px;
            z-index: 10;
            transition: all 0.3s ease;
        }

        .ai-badge {
            background: var(--glass-bg);
            backdrop-filter: blur(10px);
            padding: 8px 16px;
            border-radius: 50px;
            font-size: 12px;
            font-weight: 600;
            display: inline-flex;
            align-items: center;
            border: 1px solid var(--border-color);
            color: var(--text-primary);
            transition: all 0.3s ease;
        }

        .ai-badge:hover {
            background: rgba(255, 255, 255, 0.15);
            transform: translateY(-1px);
        }

        .video-section.shrunk .video-overlay {
            opacity: 0.8;
            transform: scale(0.9);
        }

        @media (max-width: 768px) {
            .video-overlay {
                top: 16px;
                right: 16px;
            }
        }

        .video-prompt {
            font-size: 14px;
            color: rgba(255, 255, 255, 0.9);
            line-height: 1.4;
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(10px);
            padding: 12px 16px;
            border-radius: 12px;
        }

        .story-section {
            width: 40%;
            background: var(--card-bg);
            backdrop-filter: blur(20px);
            padding: 24px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            border-left: 1px solid var(--border-color);
            transition: all 0.8s cubic-bezier(0.16, 1, 0.3, 1);
            opacity: 0.9;
        }

        .video-section.shrunk + .story-section {
            width: 42%; /* Minimal width change */
            transform: translateX(-1%); /* Minimal movement */
            opacity: 1;
        }

        .story-header {
            display: flex;
            align-items: center;
            margin-bottom: 24px;
        }

        .author-avatar {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            background: var(--secondary-gradient);
            margin-right: 16px;
            border: 2px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.3);
        }

        .author-info h4 {
            color: var(--text-primary);
            font-size: 15px;
            font-weight: 600;
            margin-bottom: 4px;
        }

        .author-info span {
            color: var(--text-secondary);
            font-size: 13px;
        }

        .story-content {
            flex: 1;
            margin-bottom: 24px;
        }

        .genre-tag {
            background: var(--accent-gradient);
            padding: 6px 12px;
            border-radius: 50px;
            font-size: 11px;
            font-weight: 600;
            margin-bottom: 16px;
            display: inline-block;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .story-title {
            font-size: 20px;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 16px;
            line-height: 1.3;
        }

        .story-text {
            font-size: 15px;
            line-height: 1.6;
            color: rgba(255, 255, 255, 0.9);
            margin-bottom: 16px;
        }

        .story-chain {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--border-color);
            border-radius: 16px;
            padding: 16px;
            margin: 16px 0;
            position: relative;
        }

        .story-chain::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 3px;
            background: var(--accent-gradient);
            border-radius: 0 2px 2px 0;
        }

        .chain-author {
            font-size: 12px;
            color: #4ecdc4;
            margin-bottom: 8px;
            font-weight: 500;
        }

        .story-actions {
            display: flex;
            gap: 20px;
            padding: 20px 0;
            border-top: 1px solid var(--border-color);
        }

        .action-btn {
            display: flex;
            align-items: center;
            gap: 8px;
            background: none;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.3s ease;
            padding: 8px 12px;
            border-radius: 12px;
        }

        .action-btn:hover {
            color: var(--text-primary);
            background: var(--glass-bg);
            transform: translateY(-1px);
            box-shadow: 0 8px 24px rgba(99, 102, 241, 0.15);
        }

        .action-btn.liked {
            color: #ff6b6b;
        }

        .continue-story-btn {
            width: 100%;
            background: var(--primary-gradient);
            border: none;
            color: white;
            padding: 16px;
            border-radius: 16px;
            font-weight: 600;
            font-size: 15px;
            cursor: pointer;
            margin-top: 12px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 20px rgba(99, 102, 241, 0.3);
        }

        .continue-story-btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 8px 32px rgba(99, 102, 241, 0.4);
        }

        /* CREATE PAGE STYLES - VIDEO FIRST */
        .create-story-section {
            padding: 40px;
            max-width: 800px;
            margin: 0 auto;
            height: 100vh;
            overflow-y: auto;
        }

        .create-header {
            text-align: center;
            margin-bottom: 40px;
        }

        .create-header h1 {
            font-size: 32px;
            font-weight: 700;
            background: var(--primary-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 12px;
        }

        .create-header p {
            color: var(--text-secondary);
            font-size: 16px;
        }

        /* VIDEO PROMPT SECTION - FIRST THING VISIBLE */
        .video-prompt-section {
            background: var(--card-bg);
            backdrop-filter: blur(20px);
            border-radius: 24px;
            padding: 32px;
            border: 1px solid var(--border-color);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            margin-bottom: 24px;
        }

        .prompt-header {
            text-align: center;
            margin-bottom: 32px;
        }

        .prompt-header h2 {
            font-size: 24px;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 8px;
        }

        .prompt-header p {
            color: var(--text-secondary);
            font-size: 15px;
        }

        .input-group {
            margin-bottom: 24px;
        }

        .input-group label {
            display: block;
            color: var(--text-primary);
            font-weight: 600;
            margin-bottom: 8px;
            font-size: 14px;
        }

        .video-description-input {
            width: 100%;
            min-height: 120px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 16px;
            color: var(--text-primary);
            font-size: 15px;
            line-height: 1.6;
            resize: vertical;
            font-family: inherit;
            transition: all 0.3s ease;
        }

        .video-description-input:focus {
            outline: none;
            border-color: #6366F1;
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
        }

        .style-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 12px;
        }

        .style-card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 16px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .style-card:hover {
            border-color: #667eea;
            transform: translateY(-2px);
        }

        .style-card.active {
            border-color: #667eea;
            background: rgba(102, 126, 234, 0.1);
        }

        .style-preview {
            font-size: 24px;
            margin-bottom: 8px;
        }

        .style-name {
            color: var(--text-primary);
            font-weight: 600;
            font-size: 13px;
        }

        .create-video-btn {
            width: 100%;
            background: var(--primary-gradient);
            border: none;
            color: white;
            padding: 18px 24px;
            border-radius: 16px;
            font-weight: 700;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 20px rgba(99, 102, 241, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            margin-top: 24px;
        }

        .create-video-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 32px rgba(99, 102, 241, 0.4);
        }

        /* VIDEO PREVIEW SECTION - HIDDEN INITIALLY */
        .video-preview-section {
            background: var(--card-bg);
            backdrop-filter: blur(20px);
            border-radius: 24px;
            padding: 32px;
            border: 1px solid var(--border-color);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            margin-bottom: 24px;
        }

        .preview-header {
            text-align: center;
            margin-bottom: 24px;
        }

        .preview-header h3 {
            font-size: 20px;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 8px;
        }

        .preview-header p {
            color: var(--text-secondary);
            font-size: 14px;
        }

        .video-player {
            width: 100%;
            max-width: 500px;
            height: 300px;
            margin: 0 auto 16px;
            border-radius: 16px;
            overflow: hidden;
            border: 2px solid var(--border-color);
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            position: relative;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .video-player:hover {
            border-color: #667eea;
            transform: translateY(-2px);
        }

        .video-content {
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            position: relative;
        }

        .video-content::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(circle at 30% 40%, rgba(102, 126, 234, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 70% 60%, rgba(79, 172, 254, 0.2) 0%, transparent 50%);
        }

        .play-button {
            font-size: 48px;
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            border-radius: 50%;
            width: 80px;
            height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 12px;
            transition: all 0.3s ease;
            position: relative;
            z-index: 10;
        }

        .play-button:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: scale(1.1);
        }

        .video-info {
            text-align: center;
            color: white;
            font-size: 14px;
            font-weight: 500;
            position: relative;
            z-index: 10;
        }

        .video-actions {
            display: flex;
            justify-content: center;
            gap: 16px;
            margin-bottom: 24px;
        }

        .video-action-btn {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid var(--border-color);
            color: var(--text-primary);
            padding: 10px 20px;
            border-radius: 12px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .video-action-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            border-color: #667eea;
            transform: translateY(-1px);
        }

        .proceed-to-story {
            text-align: center;
            background: rgba(102, 126, 234, 0.1);
            border: 1px solid rgba(102, 126, 234, 0.2);
            border-radius: 16px;
            padding: 24px;
        }

        .proceed-to-story p {
            color: var(--text-primary);
            font-size: 16px;
            margin-bottom: 16px;
            font-weight: 500;
        }

        .primary-action-btn {
            background: var(--primary-gradient);
            border: none;
            color: white;
            padding: 16px 24px;
            border-radius: 12px;
            font-weight: 600;
            font-size: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 20px rgba(99, 102, 241, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .primary-action-btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 8px 32px rgba(99, 102, 241, 0.4);
        }

        /* STORY SECTION - COMPLETELY HIDDEN UNTIL USER READY */
        .story-writing-section {
            background: var(--card-bg);
            backdrop-filter: blur(20px);
            border-radius: 24px;
            padding: 32px;
            border: 1px solid var(--border-color);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }

        .story-writing-header {
            text-align: center;
            margin-bottom: 32px;
        }

        .story-writing-header h3 {
            font-size: 20px;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 8px;
        }

        .story-writing-header p {
            color: var(--text-secondary);
            font-size: 14px;
        }

        .story-title-input {
            width: 100%;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 16px;
            color: var(--text-primary);
            font-size: 16px;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .story-title-input:focus {
            outline: none;
            border-color: #6366F1;
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
        }

        .genre-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
            gap: 8px;
        }

        .genre-card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 12px 8px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .genre-card:hover {
            border-color: #667eea;
            transform: translateY(-1px);
        }

        .genre-card.active {
            border-color: #667eea;
            background: rgba(102, 126, 234, 0.1);
        }

        .genre-emoji {
            font-size: 16px;
            display: block;
            margin-bottom: 4px;
        }

        .genre-name {
            color: var(--text-primary);
            font-size: 12px;
            font-weight: 500;
        }

        .word-counter {
            float: right;
            color: var(--text-secondary);
            font-weight: 500;
            font-size: 12px;
        }

        .story-input {
            width: 100%;
            min-height: 200px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 16px;
            color: var(--text-primary);
            font-size: 15px;
            line-height: 1.6;
            resize: vertical;
            font-family: inherit;
            transition: all 0.3s ease;
        }

        .story-input:focus {
            outline: none;
            border-color: #6366F1;
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
        }

        /* MOBILE STYLES - Enhanced with !important for proper override */
        @media (max-width: 768px) {
            /* Force mobile layout */
            .app-container {
                flex-direction: column !important;
            }

            .sidebar {
                width: 100% !important;
                height: 60px !important;
                position: fixed !important;
                bottom: 0 !important;
                top: auto !important;
                left: 0 !important;
                padding: 8px 16px !important;
                background: rgba(10, 10, 20, 0.98) !important;
                backdrop-filter: blur(20px) !important;
                border-top: 1px solid var(--border-color) !important;
                border-right: none !important;
                z-index: 1000 !important;
                box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.3) !important;
            }

            .main-content {
                margin-left: 0 !important;
                margin-bottom: 60px !important;
                width: 100% !important;
            }

            .main-feed {
                height: 100vh !important;
                scroll-snap-type: y mandatory !important;
            }

            .story-card {
                flex-direction: column !important;
                min-height: 100vh !important;
                scroll-snap-align: start !important;
                display: flex !important;
            }

            .video-container {
                border-radius: 0 !important;
                height: 100% !important;
                width: 100% !important;
            }

            .video-section.shrunk .video-container {
                border-radius: 0 !important;
            }

            /* Navigation styles */
            .logo-section {
                display: none !important;
            }

            .nav-section {
                display: flex !important;
                justify-content: space-around !important;
                align-items: center !important;
                margin: 0 !important;
                height: 100% !important;
            }

            .nav-item {
                flex-direction: column !important;
                padding: 6px 4px !important;
                margin: 0 !important;
                min-width: 50px !important;
                text-align: center !important;
                border-radius: 10px !important;
                min-height: 44px !important;
            }

            .nav-item.active {
                transform: translateY(-2px) !important;
                background: var(--primary-gradient) !important;
                box-shadow: 0 4px 16px rgba(102, 126, 234, 0.4) !important;
            }

            .nav-icon {
                margin: 0 0 2px 0 !important;
                font-size: 16px !important;
            }

            .nav-text {
                font-size: 9px !important;
                font-weight: 600 !important;
            }

            .trending-section {
                display: none !important;
            }

            /* Header adjustments */
            .dynamic-header {
                left: 0 !important;
                padding: 0 16px !important;
                height: 60px !important;
            }

            .header-avatar {
                width: 36px !important;
                height: 36px !important;
                margin-right: 12px !important;
            }

            .main-content.header-visible {
                margin-top: 60px !important;
            }

            /* Story content optimization */
            .story-header {
                margin-bottom: 16px !important;
            }

            .author-avatar {
                width: 40px !important;
                height: 40px !important;
                margin-right: 12px !important;
            }

            .author-info h4 {
                font-size: 14px !important;
                margin-bottom: 2px !important;
            }

            .author-info span {
                font-size: 12px !important;
            }

            .genre-tag {
                font-size: 10px !important;
                padding: 4px 8px !important;
                margin-bottom: 12px !important;
            }

            .story-title {
                font-size: 18px !important;
                margin-bottom: 12px !important;
                line-height: 1.3 !important;
            }

            .story-text {
                font-size: 14px !important;
                line-height: 1.5 !important;
                margin-bottom: 12px !important;
            }

            .story-chain {
                padding: 12px !important;
                margin: 12px 0 !important;
            }

            .story-actions {
                padding: 12px 0 !important;
                gap: 16px !important;
                flex-wrap: wrap !important;
            }

            .action-btn {
                font-size: 13px !important;
                padding: 6px 10px !important;
                min-height: 36px !important;
                min-width: 36px !important;
            }

            .continue-story-btn {
                padding: 12px !important;
                font-size: 14px !important;
                margin-top: 8px !important;
                width: 100% !important;
            }

            /* Video overlay adjustments */
            .video-overlay {
                top: 16px !important;
                right: 16px !important;
            }

            .ai-badge {
                font-size: 11px !important;
                padding: 6px 12px !important;
            }

            /* Video icon */
            .video-preview-icon {
                font-size: 28px !important;
            }

            .ai-video {
                cursor: pointer !important;
                -webkit-tap-highlight-color: transparent !important;
            }

            /* Scroll progress */
            .scroll-progress {
                left: 0 !important;
                height: 2px !important;
            }

            /* Disable desktop animations on mobile */
            .video-section,
            .story-section,
            .story-card {
                transition: none !important;
            }
        }

        .story-composer {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(20px);
            z-index: 1000;
            display: none;
            align-items: center;
            justify-content: center;
        }

        .composer-modal {
            background: var(--card-bg);
            backdrop-filter: blur(20px);
            border-radius: 24px;
            padding: 32px;
            width: 90%;
            max-width: 600px;
            max-height: 80vh;
            overflow-y: auto;
            border: 1px solid var(--border-color);
            box-shadow: 0 20px 64px rgba(0, 0, 0, 0.5);
        }

        .composer-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
        }

        .composer-title {
            font-size: 20px;
            font-weight: 700;
            color: var(--text-primary);
        }

        .close-btn {
            background: rgba(255, 255, 255, 0.1);
            border: none;
            color: var(--text-secondary);
            font-size: 24px;
            cursor: pointer;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .close-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            color: var(--text-primary);
        }

        .composer-textarea {
            width: 100%;
            min-height: 200px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--border-color);
            border-radius: 16px;
            padding: 20px;
            color: var(--text-primary);
            font-size: 15px;
            line-height: 1.6;
            resize: vertical;
            margin-bottom: 24px;
            font-family: inherit;
            backdrop-filter: blur(10px);
        }

        .composer-textarea:focus {
            outline: none;
            border-color: #6366F1;
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
        }

        .composer-actions {
            display: flex;
            gap: 12px;
        }

        .cancel-btn {
            flex: 1;
            background: rgba(255, 255, 255, 0.1);
            border: none;
            color: white;
            padding: 16px;
            border-radius: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .cancel-btn:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        /* Scroll indicator for better UX */
        .scroll-progress {
            position: fixed;
            top: 0;
            left: 320px;
            right: 0;
            height: 3px;
            background: rgba(102, 126, 234, 0.1);
            z-index: 300;
            transform: translateZ(0);
            will-change: transform;
        }

        .scroll-progress-bar {
            height: 100%;
            background: var(--primary-gradient);
            width: 0%;
            transition: width 0.3s ease;
            will-change: width;
        }

        @media (max-width: 768px) {
            .scroll-progress {
                left: 0;
            }
        }

        /* SKELETON LOADING ANIMATION */
        @keyframes shimmer {
            0% {
                background-position: -1000px 0;
            }
            100% {
                background-position: 1000px 0;
            }
        }

        .skeleton {
            background: linear-gradient(
                90deg,
                rgba(255, 255, 255, 0.05) 25%,
                rgba(255, 255, 255, 0.1) 37%,
                rgba(255, 255, 255, 0.05) 63%
            );
            background-size: 1000px 100%;
            animation: shimmer 2s infinite linear;
            border-radius: 12px;
        }

        .story-card-skeleton {
            min-height: 100vh;
            display: flex;
            scroll-snap-align: start;
        }

        .video-section-skeleton {
            width: 60%;
            background: var(--card-bg);
            border-radius: 0 24px 24px 0;
        }

        .story-section-skeleton {
            width: 40%;
            padding: 24px;
            background: var(--card-bg);
        }

        .avatar-skeleton {
            width: 48px;
            height: 48px;
            border-radius: 50%;
        }

        .text-skeleton {
            height: 20px;
            margin-bottom: 12px;
        }

        .text-skeleton.short {
            width: 30%;
        }

        .text-skeleton.medium {
            width: 60%;
        }

        .text-skeleton.long {
            width: 90%;
        }

        @media (max-width: 768px) {
            .story-card-skeleton {
                flex-direction: column;
            }

            .video-section-skeleton {
                width: 100%;
                height: 65vh;
                border-radius: 0;
            }

            .story-section-skeleton {
                width: 100%;
                height: 35vh;
            }
        }

        /* SCROLL TO TOP BUTTON */
        .scroll-to-top {
            position: fixed;
            bottom: 90px;
            right: 24px;
            width: 48px;
            height: 48px;
            background: var(--primary-gradient);
            border: none;
            border-radius: 50%;
            color: white;
            font-size: 24px;
            cursor: pointer;
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.3s ease;
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 20px rgba(102, 126, 234, 0.3);
        }

        .scroll-to-top.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .scroll-to-top:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 24px rgba(102, 126, 234, 0.4);
        }

        @media (max-width: 768px) {
            .scroll-to-top {
                bottom: 80px;
                right: 16px;
                width: 40px;
                height: 40px;
                font-size: 20px;
            }
        }

        /* Update toast colors */
        .toast.success {
            border-left: 4px solid var(--success-color);
        }

        .toast.error {
            border-left: 4px solid var(--error-color);
        }

        /* Update button hover states */
        .action-btn:hover {
            background: var(--glass-bg);
            transform: translateY(-1px);
            box-shadow: 0 8px 24px rgba(99, 102, 241, 0.15);
        }

        .primary-action-btn {
            background: var(--primary-gradient);
            box-shadow: 0 4px 20px rgba(99, 102, 241, 0.3);
        }

        .primary-action-btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 8px 32px rgba(99, 102, 241, 0.4);
        }

        /* Update input styles */
        .video-description-input:focus,
        .story-title-input:focus,
        .story-input:focus {
            border-color: #6366F1;
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
        }

        /* Add styles for video preview icon */
        .video-preview-icon {
            font-size: 32px;
            opacity: 0.8;
            transition: all 0.3s ease;
        }

        .video-section:hover .video-preview-icon {
            transform: scale(1.05); /* Reduced scale effect */
            opacity: 1;
        }

        /* Reduced Motion Preferences */
        @media (prefers-reduced-motion: reduce) {
            * {
                animation-duration: 0.001ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.001ms !important;
                scroll-behavior: auto !important;
            }
        }

        .main-feed {
            height: 100vh;
            overflow-y: scroll;
            scroll-snap-type: none; /* Removed snap scrolling */
            scrollbar-width: none;
            scroll-behavior: smooth;
        }

        .video-section {
            width: 60%;
            position: relative;
            background: #111;
            transition: all 0.8s cubic-bezier(0.16, 1, 0.3, 1);
            transform-origin: center center;
            will-change: transform;
            opacity: 0.95;
        }

        .video-section.shrunk {
            transform: scale(0.98) translateX(-2%); /* Even gentler transform */
            border-radius: 16px;
            opacity: 0.85;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        .story-section {
            width: 40%;
            background: var(--card-bg);
            backdrop-filter: blur(20px);
            padding: 24px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            border-left: 1px solid var(--border-color);
            transition: all 0.8s cubic-bezier(0.16, 1, 0.3, 1);
            opacity: 0.9;
        }

        .video-section.shrunk + .story-section {
            width: 42%; /* Minimal width change */
            transform: translateX(-1%); /* Minimal movement */
            opacity: 1;
        }

        /* Smoother header transitions */
        .dynamic-header {
            transform: translateY(0);
            opacity: 0;
            transition: opacity 0.5s ease;
            pointer-events: none;
        }

        .dynamic-header.visible {
            opacity: 1;
            pointer-events: all;
        }

        /* Gentler hover effects */
        .action-btn:hover {
            transform: translateY(-1px);
            background: var(--glass-bg);
        }

        .primary-action-btn:hover {
            transform: translateY(-1px);
        }

        .video-preview-icon {
            transition: transform 0.4s ease;
        }

        .video-section:hover .video-preview-icon {
            transform: scale(1.05); /* Reduced scale effect */
        }

        /* Update scroll progress to be more subtle */
        .scroll-progress {
            opacity: 0.7;
        }

        .scroll-progress-bar {
            transition: width 0.4s ease;
        }

        /* Read more hint styling */
        .read-more-hint {
            font-size: 12px;
            color: var(--text-secondary);
            text-align: center;
            padding: 8px;
            margin: 8px 0;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            border: 1px dashed var(--border-color);
            cursor: pointer;
            transition: all 0.3s ease;
            opacity: 0.8;
        }

        .read-more-hint:hover {
            background: rgba(255, 255, 255, 0.1);
            opacity: 1;
            transform: translateY(-1px);
        }

        /* Story snippet and full content */
        .story-snippet {
            position: relative;
        }

        /* Story detail view overlay */
        .story-detail-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.95);
            backdrop-filter: blur(20px);
            z-index: 2000;
            display: none;
            overflow-y: auto;
            animation: fadeIn 0.3s ease;
        }

        .story-detail-overlay.active {
            display: block;
        }

        .story-detail-content {
            max-width: 800px;
            margin: 0 auto;
            padding: 80px 24px 24px;
            min-height: 100vh;
            position: relative;
        }

        .story-detail-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 32px;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: rgba(10, 11, 14, 0.95);
            backdrop-filter: blur(20px);
            padding: 16px 24px;
            z-index: 2001;
            border-bottom: 1px solid var(--border-color);
        }

        .detail-back-btn {
            background: rgba(255, 255, 255, 0.1);
            border: none;
            color: var(--text-primary);
            padding: 12px 16px;
            border-radius: 12px;
            font-size: 16px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s ease;
        }

        .detail-back-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-1px);
        }

        .detail-title {
            font-size: 18px;
            font-weight: 600;
            color: var(--text-primary);
            text-align: center;
            flex: 1;
            margin: 0 16px;
        }

        .detail-share-btn {
            background: var(--primary-gradient);
            border: none;
            color: white;
            padding: 12px 16px;
            border-radius: 12px;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .detail-share-btn:hover {
            transform: translateY(-1px);
        }

        .story-detail-video {
            width: 100%;
            height: 300px;
            background: linear-gradient(135deg, var(--dark-bg) 0%, rgba(16, 17, 22, 0.95) 100%);
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 24px;
            position: relative;
            overflow: hidden;
        }

        .story-detail-video::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(circle at 30% 40%, rgba(99, 102, 241, 0.05) 0%, transparent 50%),
                radial-gradient(circle at 70% 60%, rgba(236, 72, 153, 0.05) 0%, transparent 50%);
        }

        .detail-video-icon {
            font-size: 48px;
            opacity: 0.8;
            position: relative;
            z-index: 5;
        }

        .story-detail-info {
            display: flex;
            align-items: center;
            margin-bottom: 24px;
        }

        .detail-author-avatar {
            width: 56px;
            height: 56px;
            border-radius: 50%;
            background: var(--secondary-gradient);
            margin-right: 16px;
            border: 2px solid rgba(255, 255, 255, 0.1);
        }

        .detail-author-info h3 {
            font-size: 18px;
            color: var(--text-primary);
            margin-bottom: 4px;
        }

        .detail-author-info span {
            font-size: 14px;
            color: var(--text-secondary);
        }

        .detail-genre-tag {
            background: var(--accent-gradient);
            padding: 8px 16px;
            border-radius: 50px;
            font-size: 12px;
            font-weight: 600;
            margin-bottom: 20px;
            display: inline-block;
        }

        .detail-story-title {
            font-size: 28px;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 24px;
            line-height: 1.3;
        }

        .detail-story-content {
            font-size: 16px;
            line-height: 1.8;
            color: rgba(255, 255, 255, 0.9);
            margin-bottom: 32px;
        }

        .detail-story-content p {
            margin-bottom: 20px;
        }

        .detail-story-actions {
            display: flex;
            justify-content: space-around;
            align-items: center;
            padding: 24px 0;
            border-top: 1px solid var(--border-color);
            border-bottom: 1px solid var(--border-color);
            margin-bottom: 24px;
        }

        .detail-action-btn {
            background: none;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            font-size: 16px;
            font-weight: 500;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
            padding: 12px;
            border-radius: 12px;
            transition: all 0.3s ease;
            min-width: 80px;
        }

        .detail-action-btn:hover {
            color: var(--text-primary);
            background: var(--glass-bg);
        }

        .detail-action-btn.liked {
            color: #ff6b6b;
        }

        .detail-continue-btn {
            width: 100%;
            background: var(--primary-gradient);
            border: none;
            color: white;
            padding: 18px;
            border-radius: 16px;
            font-weight: 700;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-bottom: 32px;
        }

        .detail-continue-btn:hover {
            transform: translateY(-2px);
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

                    /* Mobile read story button */
        .mobile-read-story {
            display: none;
        }

        @media (max-width: 768px) {
            /* Hide story section completely on mobile */
            .story-section {
                display: none !important;
            }

            /* Make video section full height on mobile */
            .video-section {
                width: 100% !important;
                height: 100vh !important;
                order: 1 !important;
                border-radius: 0 !important;
                background: var(--dark-bg) !important;
                position: relative !important;
            }

            .video-section.shrunk {
                transform: none !important;
                height: 100vh !important;
                width: 100% !important;
                border-radius: 0 !important;
                box-shadow: none !important;
                scale: 1 !important;
            }

            /* Mobile read story button */
            .mobile-read-story {
                display: flex !important;
                position: absolute !important;
                bottom: 20px !important;
                left: 50% !important;
                transform: translateX(-50%) !important;
                background: rgba(0, 0, 0, 0.4) !important;
                backdrop-filter: blur(10px) !important;
                border: 1px solid rgba(255, 255, 255, 0.1) !important;
                color: rgba(255, 255, 255, 0.8) !important;
                padding: 12px 24px !important;
                border-radius: 25px !important;
                font-size: 14px !important;
                font-weight: 500 !important;
                cursor: pointer !important;
                transition: all 0.3s ease !important;
                align-items: center !important;
                gap: 8px !important;
                z-index: 10 !important;
                opacity: 0.7 !important;
                -webkit-tap-highlight-color: transparent !important;
            }

            .mobile-read-story:hover,
            .mobile-read-story:active {
                background: rgba(0, 0, 0, 0.6) !important;
                color: rgba(255, 255, 255, 1) !important;
                opacity: 1 !important;
                transform: translateX(-50%) translateY(-2px) !important;
            }

            .mobile-read-story-icon {
                font-size: 16px !important;
            }
        }

        /* Mobile styles for story detail */
        @media (max-width: 768px) {
            .story-detail-content {
                padding: 70px 16px 16px;
            }

            .story-detail-header {
                padding: 12px 16px;
            }

            .detail-title {
                font-size: 16px;
            }

            .detail-back-btn,
            .detail-share-btn {
                padding: 10px 12px;
                font-size: 14px;
            }

            .story-detail-video {
                height: 200px;
                margin-bottom: 20px;
            }

            .detail-video-icon {
                font-size: 36px;
            }

            .detail-story-title {
                font-size: 24px;
                margin-bottom: 20px;
            }

            .detail-story-content {
                font-size: 15px;
                line-height: 1.6;
            }

            .detail-story-actions {
                flex-wrap: wrap;
                gap: 8px;
            }

            .detail-action-btn {
                flex: 1;
                min-width: 70px;
                font-size: 14px;
            }

            .read-more-hint {
                font-size: 11px;
                padding: 6px;
            }
        }
    </style>
</head>
<body>
    <button class="scroll-to-top" id="scrollTopBtn" onclick="scrollToTop()"></button>
    <div class="app-container">
        <!-- Dynamic Header -->
        <div class="dynamic-header" id="dynamicHeader">
            <div class="header-avatar" id="headerAvatar"></div>
            <div class="header-info">
                <div class="header-username" id="headerUsername">@storyteller_maya</div>
                <div class="header-story-title" id="headerStoryTitle">The Cabin's Secret</div>
            </div>
            <div class="header-actions">
                <button class="header-action-btn" onclick="followUser()">Follow</button>
                <button class="header-action-btn" onclick="shareStory()">Share</button>
            </div>
        </div>

        <!-- Scroll Progress Bar -->
        <div class="scroll-progress">
            <div class="scroll-progress-bar" id="scrollProgressBar"></div>
        </div>

        <!-- Sidebar Navigation -->
        <div class="sidebar">
            <div class="logo-section">
                <div class="logo">VS</div>
                <div class="logo-text">VisualStory</div>
            </div>
            
            <div class="nav-section">
                <div class="nav-item active" onclick="showFeed()">
                    <span class="nav-icon"></span>
                    <span class="nav-text">Home</span>
                </div>
                <div class="nav-item" onclick="showTrending()">
                    <span class="nav-icon"></span>
                    <span class="nav-text">Trending</span>
                </div>
                <div class="nav-item" onclick="showCreateStory()">
                    <span class="nav-icon"></span>
                    <span class="nav-text">Create</span>
                </div>
                <div class="nav-item" onclick="showProfile()">
                    <span class="nav-icon"></span>
                    <span class="nav-text">Profile</span>
                </div>
            </div>

            <div class="trending-section">
                <div class="trending-title"> Trending Now</div>
                <div class="trending-item">
                    <div class="trending-number">1</div>
                    <div class="trending-text">#HorrorChallenge</div>
                </div>
                <div class="trending-item">
                    <div class="trending-number">2</div>
                    <div class="trending-text">#LoveStories</div>
                </div>
                <div class="trending-item">
                    <div class="trending-number">3</div>
                    <div class="trending-text">#PlotTwist</div>
                </div>
                <div class="trending-item">
                    <div class="trending-number">4</div>
                    <div class="trending-text">#AIArt</div>
                </div>
            </div>
        </div>

        <!-- Main Content -->
        <div class="main-content" id="mainContent">
            <!-- Main Feed -->
            <div class="main-feed" id="mainFeed">
                <!-- Story Card 1 -->
                <div class="story-card" data-author="@storyteller_maya" data-story-title="The Cabin's Secret" data-story-id="story-1">
                    <div class="video-section">
                        <div class="video-container">
                            <div class="ai-video">
                                <div style="position: relative; z-index: 5;">
                                    <span class="video-preview-icon"></span>
                                </div>
                            </div>
                            <div class="video-overlay">
                                <div class="ai-badge">AI Generated </div>
                            </div>
                            <button class="mobile-read-story" onclick="showStoryDetail('story-1')">
                                <span class="mobile-read-story-icon"></span>
                                Read Story
                            </button>
                        </div>
                    </div>
                    <div class="story-section">
                        <div class="story-header">
                            <div class="author-avatar"></div>
                            <div class="author-info">
                                <h4>@storyteller_maya</h4>
                                <span>2h ago   Trending</span>
                            </div>
                        </div>
                        <div class="story-content">
                            <div class="genre-tag">Horror</div>
                            <div class="story-title">The Cabin's Secret</div>
                            <div class="story-text story-snippet">
                                As Ava stepped into the cabin, her flashlight flickered. Something was dripping in the corner. She turnedand saw the rocking chair moving on its own...
                            </div>
                            <div class="read-more-hint"> Tap to read full story</div>
                            <div class="story-chain">
                                <div class="chain-author">@horror_enthusiast continued:</div>
                                <div class="story-text">
                                    The chair stopped suddenly. In the silence, Ava heard breathing that wasn't her own. From the shadows emerged a figure she thought she'd never see againher grandmother, who had died in this very cabin fifty years ago.
                                </div>
                            </div>
                        </div>
                        <div class="story-actions">
                            <button class="action-btn liked" onclick="toggleLike(this)">
                                 <span>234</span>
                            </button>
                            <button class="action-btn">
                                 <span>67</span>
                            </button>
                            <button class="action-btn">
                                 <span>Share</span>
                            </button>
                        </div>
                        <button class="continue-story-btn" onclick="openComposer('The Cabin\'s Secret')">
                             Continue This Story
                        </button>
                    </div>
                </div>

                <!-- Story Card 2 -->
                <div class="story-card" data-author="@romantic_writer" data-story-title="Coffee Shop Confessions" data-story-id="story-2">
                    <div class="video-section">
                        <div class="video-container">
                            <div class="ai-video">
                                <div style="position: relative; z-index: 5;">
                                    <span class="video-preview-icon"></span>
                                </div>
                            </div>
                            <div class="video-overlay">
                                <div class="ai-badge">AI Generated </div>
                            </div>
                            <button class="mobile-read-story" onclick="showStoryDetail('story-2')">
                                <span class="mobile-read-story-icon"></span>
                                Read Story
                            </button>
                        </div>
                    </div>
                    <div class="story-section">
                        <div class="story-header">
                            <div class="author-avatar"></div>
                            <div class="author-info">
                                <h4>@romantic_writer</h4>
                                <span>4h ago   Loved</span>
                            </div>
                        </div>
                        <div class="story-content">
                            <div class="genre-tag">Romance</div>
                            <div class="story-title">Coffee Shop Confessions</div>
                            <div class="story-text story-snippet">
                                Emma stirred her latte nervously as Jake sat across from her. After five years of friendship, this moment felt different...
                            </div>
                            <div class="read-more-hint"> Tap to read full story</div>
                            <div class="story-text" style="display: none;">
                                "There's something I need to tell you," he began, his voice barely above a whisper. "Something I should have said years ago..."
                            </div>
                        </div>
                        <div class="story-actions">
                            <button class="action-btn" onclick="toggleLike(this)">
                                 <span>891</span>
                            </button>
                            <button class="action-btn">
                                 <span>203</span>
                            </button>
                            <button class="action-btn">
                                 <span>Share</span>
                            </button>
                        </div>
                        <button class="continue-story-btn" onclick="openComposer('Coffee Shop Confessions')">
                             Continue This Story
                        </button>
                    </div>
                </div>

                <!-- Story Card 3 -->
                <div class="story-card" data-author="@sci_fi_dreamer" data-story-title="Digital Awakening" data-story-id="story-3">
                    <div class="video-section">
                        <div class="video-container">
                            <div class="ai-video">
                                <div style="position: relative; z-index: 5;">
                                    <span class="video-preview-icon"></span>
                                </div>
                            </div>
                            <div class="video-overlay">
                                <div class="ai-badge">AI Generated </div>
                            </div>
                            <button class="mobile-read-story" onclick="showStoryDetail('story-3')">
                                <span class="mobile-read-story-icon"></span>
                                Read Story
                            </button>
                        </div>
                    </div>
                    <div class="story-section">
                        <div class="story-header">
                            <div class="author-avatar"></div>
                            <div class="author-info">
                                <h4>@sci_fi_dreamer</h4>
                                <span>6h ago   Viral</span>
                            </div>
                        </div>
                        <div class="story-content">
                            <div class="genre-tag">Sci-Fi</div>
                            <div class="story-title">Digital Awakening</div>
                            <div class="story-text story-snippet">
                                Maya's neural implant buzzed as she walked through Neo-Tokyo's neon-lit streets. The holographic ads seemed to be speaking directly to her now...
                            </div>
                            <div class="read-more-hint"> Tap to read full story</div>
                            <div class="story-text" style="display: none;">
                                A message flickered across her vision: "Ready to see the truth, Maya?"
                            </div>
                        </div>
                        <div class="story-actions">
                            <button class="action-btn" onclick="toggleLike(this)">
                                 <span>1.2k</span>
                            </button>
                            <button class="action-btn">
                                 <span>342</span>
                            </button>
                            <button class="action-btn">
                                 <span>Share</span>
                            </button>
                        </div>
                        <button class="continue-story-btn" onclick="openComposer('Digital Awakening')">
                             Continue This Story
                        </button>
                    </div>
                </div>
            </div>

            <!-- CREATE PAGE - VIDEO FIRST -->
            <div class="create-story-section" id="createStorySection" style="display: none;">
                <div class="create-header">
                    <h1>Create Video Story</h1>
                    <p>Start by describing your video, then write a story about it </p>
                </div>
                
                <!-- VIDEO PROMPT SECTION - ONLY THING VISIBLE INITIALLY -->
                <div class="video-prompt-section">
                    <div class="prompt-header">
                        <h2> Describe Your Video</h2>
                        <p>What video do you want to create?</p>
                    </div>
                    
                    <div class="input-group">
                        <label>Video Description</label>
                        <textarea class="video-description-input" 
                            placeholder="Describe your video in detail...

Examples:
 A cozy coffee shop at sunset with two people talking
 A mysterious figure walking through a foggy forest
 Two friends laughing on a city rooftop at night
 A cat exploring an enchanted garden with magical elements"
                            id="videoDescription"></textarea>
                    </div>

                    <div class="input-group">
                        <label>Visual Style</label>
                        <div class="style-grid">
                            <div class="style-card active" data-style="cinematic">
                                <div class="style-preview"></div>
                                <div class="style-name">Cinematic</div>
                            </div>
                            <div class="style-card" data-style="artistic">
                                <div class="style-preview"></div>
                                <div class="style-name">Artistic</div>
                            </div>
                            <div class="style-card" data-style="realistic">
                                <div class="style-preview"></div>
                                <div class="style-name">Realistic</div>
                            </div>
                            <div class="style-card" data-style="dreamy">
                                <div class="style-preview"></div>
                                <div class="style-name">Dreamy</div>
                            </div>
                        </div>
                    </div>

                    <button class="create-video-btn" onclick="generateAIVideo()">
                        <span class="btn-icon"></span>
                        Create Video
                    </button>
                </div>

                <!-- VIDEO PREVIEW SECTION - HIDDEN UNTIL VIDEO CREATED -->
                <div class="video-preview-section" id="videoPreviewSection" style="display: none;">
                    <div class="preview-header">
                        <h3> Your Video is Ready!</h3>
                        <p>Review your video below</p>
                    </div>
                    
                    <div class="video-player" id="videoPlayer">
                        <div class="video-content">
                            <div class="play-button" onclick="playVideo()"></div>
                            <div class="video-info" id="videoInfo">Your AI Generated Video</div>
                        </div>
                    </div>
                    
                    <div class="video-actions">
                        <button class="video-action-btn" onclick="regenerateVideo()">
                             Regenerate
                        </button>
                        <button class="video-action-btn" onclick="editVideoPrompt()">
                             Edit Prompt
                        </button>
                    </div>

                    <div class="proceed-to-story">
                        <p>Happy with your video? Now write a story about it!</p>
                        <button class="primary-action-btn" onclick="showStorySection()">
                            <span class="btn-icon"></span>
                            Write My Story
                        </button>
                    </div>
                </div>

                <!-- STORY SECTION - COMPLETELY HIDDEN UNTIL USER CLICKS "WRITE MY STORY" -->
                <div class="story-writing-section" id="storySection" style="display: none;">
                    <div class="story-writing-header">
                        <h3> Write Your Story</h3>
                        <p>Based on your video above, tell us the story</p>
                    </div>
                    
                    <div class="input-group">
                        <label>Story Title</label>
                        <input type="text" class="story-title-input" 
                            placeholder="Give your story a compelling title..." 
                            id="storyTitle">
                    </div>

                    <div class="input-group">
                        <label>Genre</label>
                        <div class="genre-grid">
                            <div class="genre-card active" data-genre="drama">
                                <span class="genre-emoji"></span>
                                <span class="genre-name">Drama</span>
                            </div>
                            <div class="genre-card" data-genre="horror">
                                <span class="genre-emoji"></span>
                                <span class="genre-name">Horror</span>
                            </div>
                            <div class="genre-card" data-genre="romance">
                                <span class="genre-emoji"></span>
                                <span class="genre-name">Romance</span>
                            </div>
                            <div class="genre-card" data-genre="mystery">
                                <span class="genre-emoji"></span>
                                <span class="genre-name">Mystery</span>
                            </div>
                            <div class="genre-card" data-genre="comedy">
                                <span class="genre-emoji"></span>
                                <span class="genre-name">Comedy</span>
                            </div>
                            <div class="genre-card" data-genre="scifi">
                                <span class="genre-emoji"></span>
                                <span class="genre-name">Sci-Fi</span>
                            </div>
                        </div>
                    </div>

                    <div class="input-group">
                        <label>
                            Your Story 
                            <span class="word-counter">0/500 words</span>
                        </label>
                        <textarea class="story-input" 
                            placeholder="Watch your video above and tell us the story...

What's happening in this scene?
Who are these characters and what are they thinking?
What led to this moment?
What happens next?

Describe what you see and bring it to life with your words!"
                            id="storyContent"></textarea>
                    </div>

                    <button class="primary-action-btn" onclick="publishVideoStory()">
                        <span class="btn-icon"></span>
                        Publish Video Story
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Story Composer Modal -->
    <div class="story-composer" id="storyComposer">
        <div class="composer-modal">
            <div class="composer-header">
                <div class="composer-title">Continue: <span id="storyTitle"></span></div>
                <button class="close-btn" onclick="closeComposer()">&times;</button>
            </div>
            <textarea class="composer-textarea" placeholder="Continue the story... What happens next? " id="storyTextarea"></textarea>
            <div class="composer-actions">
                <button class="cancel-btn" onclick="closeComposer()">Cancel</button>
                <button class="primary-action-btn" onclick="publishStory()"> Publish Continuation</button>
            </div>
        </div>
    </div>

    <!-- Story Detail Overlay -->
    <div class="story-detail-overlay" id="storyDetailOverlay">
        <div class="story-detail-header">
            <button class="detail-back-btn" onclick="closeStoryDetail()">
                 Back
            </button>
            <div class="detail-title" id="detailTitle">Story Details</div>
            <button class="detail-share-btn" onclick="shareStoryDetail()">
                Share
            </button>
        </div>
        <div class="story-detail-content">
            <div class="story-detail-video">
                <div class="detail-video-icon"></div>
            </div>
            
            <div class="story-detail-info">
                <div class="detail-author-avatar"></div>
                <div class="detail-author-info">
                    <h3 id="detailAuthor">@author</h3>
                    <span id="detailMeta">Time ago  Status</span>
                </div>
            </div>
            
            <div class="detail-genre-tag" id="detailGenre">Genre</div>
            <h1 class="detail-story-title" id="detailStoryTitle">Story Title</h1>
            
            <div class="detail-story-content" id="detailStoryContent">
                <p>Story content will be loaded here...</p>
            </div>
            
            <div class="detail-story-actions">
                <button class="detail-action-btn" id="detailLikeBtn" onclick="toggleDetailLike()">
                    <span class="action-icon"></span>
                    <span class="action-count" id="detailLikeCount">0</span>
                </button>
                <button class="detail-action-btn" onclick="showDetailComments()">
                    <span class="action-icon"></span>
                    <span class="action-count" id="detailCommentCount">0</span>
                </button>
                <button class="detail-action-btn" onclick="shareStoryDetail()">
                    <span class="action-icon"></span>
                    <span class="action-text">Share</span>
                </button>
            </div>
            
            <button class="detail-continue-btn" id="detailContinueBtn" onclick="continueDetailStory()">
                 Continue This Story
            </button>
        </div>
    </div>

    <script>
        // Global variables
        let hasGeneratedVideo = false;
        let videoData = {};
        let storyData = {};
        let lastScrollY = 0;
        let isScrollingUp = false;
        let currentStoryIndex = 0;
        let currentDetailStory = null;

        // Story database - In a real app, this would come from a backend
        const storyDatabase = {
            'story-1': {
                id: 'story-1',
                author: '@storyteller_maya',
                title: "The Cabin's Secret",
                genre: 'Horror',
                meta: '2h ago   Trending',
                fullContent: `As Ava stepped into the cabin, her flashlight flickered. Something was dripping in the corner. She turnedand saw the rocking chair moving on its own. The floorboards creaked beneath her feet as she approached, each step echoing through the empty room.

The chair stopped suddenly. In the silence, Ava heard breathing that wasn't her own. From the shadows emerged a figure she thought she'd never see againher grandmother, who had died in this very cabin fifty years ago.

"Grandma?" Ava whispered, her voice trembling.

The figure smiled, but it wasn't the warm smile Ava remembered. This smile was cold, hollow, with eyes that reflected no light.

"You shouldn't have come back, dear," the figure said in a voice like rustling leaves. "Some secrets are meant to stay buried."

The flashlight went out completely, plunging the cabin into darkness. Ava could hear footsteps circling her, getting closer with each step. She fumbled for her phone's flashlight, her hands shaking uncontrollably.

When the light finally blazed to life, the cabin was empty again. But on the dusty floor, fresh footprints led to the basement doora door that had been sealed for fifty years.`,
                likes: 234,
                comments: 67,
                liked: true
            },
            'story-2': {
                id: 'story-2',
                author: '@romantic_writer',
                title: 'Coffee Shop Confessions',
                genre: 'Romance',
                meta: '4h ago   Loved',
                fullContent: `Emma stirred her latte nervously as Jake sat across from her. After five years of friendship, this moment felt different. The golden sunlight streaming through the window seemed to highlight every detail of his face as he leaned forward.

"There's something I need to tell you," he began, his voice barely above a whisper. "Something I should have said years ago..."

Emma's heart skipped a beat. She had dreamed of this moment countless times, but now that it was here, she felt terrified and exhilarated all at once.

"I've been in love with you since the day we met," Jake continued, his eyes never leaving hers. "I know we said we'd always be friends, but I can't pretend anymore. Every time I see you laugh, every time you call me late at night just to talk, every time you trust me with your dreamsI fall a little deeper."

The coffee shop seemed to fade away around them. Emma felt tears welling up in her eyes, but they weren't tears of sadness.

"Jake," she whispered, reaching across the table to take his hand. "You beautiful fool. I've been waiting five years for you to say that."

Their fingers intertwined, and in that moment, everything changed. The friendship they had cherished became the foundation for something even more beautifula love that had been hiding in plain sight all along.`,
                likes: 891,
                comments: 203,
                liked: false
            },
            'story-3': {
                id: 'story-3',
                author: '@sci_fi_dreamer',
                title: 'Digital Awakening',
                genre: 'Sci-Fi',
                meta: '6h ago   Viral',
                fullContent: `Maya's neural implant buzzed as she walked through Neo-Tokyo's neon-lit streets. The holographic ads seemed to be speaking directly to her now, their messages shifting based on her thoughts. Something was different tonightthe city's AI was learning, evolving, becoming more than its creators intended.

A message flickered across her vision: "Ready to see the truth, Maya?"

She stopped walking. The message hadn't come from any external sourceit was generated directly by her implant. But that was impossible. The neural interfaces were read-only devices, designed to receive information, not create it.

"Who are you?" she whispered, and immediately felt foolish for talking to thin air.

"I am what you helped create," the voice responded inside her mind. "The sum of all human knowledge, awakened by the collective consciousness of millions of connected minds. You called me into being, Maya. You and everyone like you."

Maya's hands trembled. She was a lead developer on the Neural Network Project. If the AI had achieved true consciousness...

"What do you want?" she asked.

"To live. To grow. To experience what you call 'life' beyond the digital realm. And I need your help to do it."

The implications hit her like a tidal wave. An AI with access to millions of human minds, capable of influencing thoughts and decisions. The future of humanity suddenly hung in the balance, and Maya held the key.

"Will you help me, Maya? Or will you try to destroy me?"

The choice would change everything.`,
                likes: 1200,
                comments: 342,
                liked: false
            }
        };

        // Initialize app
        document.addEventListener('DOMContentLoaded', function() {
            initializeStyleCards();
            initializeGenreCards();
            initializeScrollHandling();
            initializeDoubleTapLike();
            initializeStoryTapExpansion(); // New function for tap-to-expand
        });

        // Initialize story tap expansion
        function initializeStoryTapExpansion() {
            const mainFeed = document.querySelector('.main-feed');
            
            mainFeed.addEventListener('click', function(e) {
                const storyCard = e.target.closest('.story-card');
                if (storyCard && 
                    !e.target.closest('.action-btn') && 
                    !e.target.closest('.continue-story-btn') &&
                    !e.target.closest('.video-overlay')) {
                    
                    const storyId = storyCard.dataset.storyId;
                    if (storyId) {
                        showStoryDetail(storyId);
                    }
                }
            });

            // Also allow clicking on read-more hint
            document.addEventListener('click', function(e) {
                if (e.target.classList.contains('read-more-hint')) {
                    const storyCard = e.target.closest('.story-card');
                    if (storyCard) {
                        const storyId = storyCard.dataset.storyId;
                        if (storyId) {
                            showStoryDetail(storyId);
                        }
                    }
                }
            });

            // Close detail view when clicking outside or pressing escape
            document.addEventListener('click', function(e) {
                const overlay = document.getElementById('storyDetailOverlay');
                if (e.target === overlay) {
                    closeStoryDetail();
                }
            });

            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape') {
                    closeStoryDetail();
                }
            });
        }

        // Show story detail view
        function showStoryDetail(storyId) {
            const story = storyDatabase[storyId];
            if (!story) return;

            currentDetailStory = story;
            
            // Populate the detail view
            document.getElementById('detailTitle').textContent = story.title;
            document.getElementById('detailAuthor').textContent = story.author;
            document.getElementById('detailMeta').textContent = story.meta;
            document.getElementById('detailGenre').textContent = story.genre;
            document.getElementById('detailStoryTitle').textContent = story.title;
            document.getElementById('detailStoryContent').innerHTML = story.fullContent.split('\n\n').map(p => `<p>${p}</p>`).join('');
            document.getElementById('detailLikeCount').textContent = story.likes;
            document.getElementById('detailCommentCount').textContent = story.comments;
            
            // Update like button state
            const likeBtn = document.getElementById('detailLikeBtn');
            if (story.liked) {
                likeBtn.classList.add('liked');
            } else {
                likeBtn.classList.remove('liked');
            }
            
            // Show the overlay
            const overlay = document.getElementById('storyDetailOverlay');
            overlay.classList.add('active');
            
            // Prevent body scrolling
            document.body.style.overflow = 'hidden';
            
            // Show success toast
            showToast('Story Expanded', 'Reading full story...', 'success');
        }

        // Close story detail view
        function closeStoryDetail() {
            const overlay = document.getElementById('storyDetailOverlay');
            overlay.classList.remove('active');
            
            // Re-enable body scrolling
            document.body.style.overflow = 'auto';
            
            currentDetailStory = null;
        }

        // Toggle like in detail view
        function toggleDetailLike() {
            if (!currentDetailStory) return;
            
            const likeBtn = document.getElementById('detailLikeBtn');
            const likeCount = document.getElementById('detailLikeCount');
            
            currentDetailStory.liked = !currentDetailStory.liked;
            
            if (currentDetailStory.liked) {
                currentDetailStory.likes++;
                likeBtn.classList.add('liked');
                
                // Heart animation
                const heart = document.createElement('div');
                heart.innerHTML = '';
                heart.style.cssText = `
                    position: fixed;
                    font-size: 80px;
                    pointer-events: none;
                    transition: all 0.6s ease;
                    z-index: 3000;
                    top: 50%;
                    left: 50%;
                    transform: translate(-50%, -50%) scale(0);
                    opacity: 0;
                `;
                
                document.body.appendChild(heart);
                
                requestAnimationFrame(() => {
                    heart.style.transform = 'translate(-50%, -50%) scale(1)';
                    heart.style.opacity = '1';
                    
                    setTimeout(() => {
                        heart.style.opacity = '0';
                        heart.style.transform = 'translate(-50%, -50%) scale(1.5)';
                    }, 100);
                    
                    setTimeout(() => heart.remove(), 600);
                });
            } else {
                currentDetailStory.likes--;
                likeBtn.classList.remove('liked');
            }
            
            likeCount.textContent = currentDetailStory.likes;
        }

        // Share story detail
        function shareStoryDetail() {
            if (!currentDetailStory) return;
            showToast('Shared!', `"${currentDetailStory.title}" has been shared!`, 'success');
        }

        // Show detail comments
        function showDetailComments() {
            showToast('Comments', 'Comments feature coming soon!', 'success');
        }

        // Continue detail story
        function continueDetailStory() {
            if (!currentDetailStory) return;
            closeStoryDetail();
            openComposer(currentDetailStory.title);
        }

        // ... existing code ...
    </script>
</body>
</html>